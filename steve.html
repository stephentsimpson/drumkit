<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title></title>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

/*global $ */




$(document).ready(function(){
/*global $ */
//alert("working");
    var keyheld = false;
    function playsound(e){ 
        
      const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
      const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
      const key2 = document.querySelectorAll(`.key[data-key="${e.keyCode}"]`);
      
      if(!keyheld){
        keyheld=true;
      if (!audio) return; //stop the funtion rom runnin all together
      //console.log(key);
      var kbd = [].slice.call(key2);
      kbd.forEach(function(element) {
        // console.log(element);
      });
      
      audio.currentTime = 0; //rewind to the start
      audio.play();
      key.classList.add('playing');
      
    }}

     function removeTransition(e) {
       if (e.propertyName !== 'transform') return;
       this.classList.remove('playing');
     }


     const keys = document.querySelectorAll('.key');
     keys.forEach(key =>  key.addEventListener('transitionend', removeTransition));
 
  
  $(document).on("keydown",playsound);
  
   $(document).on("keyup",reset);
   
   function reset(){
     keyheld=false;
   }
   
  });

//  });
</script>
</head>
<body>
  
  <div class="keys">
    <div data-key="83" class="key">
      <kbd> S </kbd>
      <span class="sound"> Sagacious </span>
    </div>
    <div data-key="84" class="key">
      <kbd> T </kbd>
      <span class="sound"> Tenacious </span>
    </div>
    <div data-key="69" class="key">
      <kbd> E </kbd>
      <span class="sound"> Empathic </span>
    </div>
    <div data-key="80" class="key">
      <kbd> P </kbd>
      <span class="sound"> Passionate </span>
    </div>
    <div data-key="72" class="key">
      <kbd> H </kbd>
      <span class="sound"> Honest </span>
    </div>
    <div data-key="69" class="key">
      <kbd> E </kbd>
      <span class="sound"> Empathic </span>
    </div>
    <div data-key="78" class="key">
      <kbd>N</kbd>
      <span class="sound"> Nascent Developer </span>
    </div>

       <audio data-key="83" src="sounds/clap.wav"></audio>
       <audio data-key="84" src="sounds/hihat.wav"></audio>
       <audio data-key="69" src="sounds/kick.wav"></audio>
       <audio data-key="80" src="sounds/openhat.wav"></audio>
       <audio data-key="72" src="sounds/boom.wav"></audio>
       <audio data-key="69" src="sounds/ride.wav"></audio>
       <audio data-key="78" src="sounds/snare.wav"></audio>
       
  </div>
</body>
</html>


